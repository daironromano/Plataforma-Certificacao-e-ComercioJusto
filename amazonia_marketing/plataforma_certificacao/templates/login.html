<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Amazônia Marketing</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/variables.css' %}">
    <link rel="stylesheet" href="{% static 'css/auth.css' %}">
</head>
<body class="auth-page">
    <canvas id="canvas-bg"></canvas>

    <div class="auth-container">
        <!-- Header com Logo e Nome -->
        <div class="auth-header">
            <div class="brand-row">
                <div class="logo-icon">
                    <img src="{% static 'logo_solta.png' %}" alt="Logo Amazônia Marketing">
                </div>
                <div class="brand-name">Amazônia<br>Marketing</div>
            </div>
        </div>

        <!-- Formulário de Login -->
        <form method="post" class="auth-form">
            {% csrf_token %}

            <!-- Título do Formulário -->
            <div class="form-title">
                <h1>Login</h1>
            </div>

            <!-- Mensagem de Erro (se houver) -->
            {% if msg %}
            <div class="form-message error">
                <span>⚠️</span>
                <span>{{ msg }}</span>
            </div>
            {% endif %}

            <!-- Campo Email -->
            <div class="form-group">
                <label for="email">
                    Email
                </label>
                <input 
                    type="email" 
                    id="email"
                    name="email" 
                    placeholder="seu@email.com"
                    required
                    autocomplete="email">
            </div>

            <!-- Campo Senha -->
            <div class="form-group">
                <label for="senha">
                    Senha
                </label>
                <input 
                    type="password" 
                    id="senha"
                    name="senha" 
                    placeholder="Digite sua senha"
                    required
                    autocomplete="current-password">
            </div>

            <!-- Checkbox Lembrar-me -->
            <div class="form-checkbox">
                <input type="checkbox" id="remember" name="remember">
                <label for="remember">Lembrar-me neste dispositivo</label>
            </div>

            <!-- Botão Entrar -->
            <button type="submit" class="btn btn-primary">
                ✓ Entrar
            </button>

            <!-- Divisor -->
            <div class="divider">OU</div>

            <!-- Botão Google Login -->
            <a href="{% url 'google_login' %}" class="btn btn-secondary">
                <span class="google-icon" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="22" height="22">
                        <path fill="#4285F4" d="M24 9.5c3.54 0 6 1.54 7.38 2.83l5.4-5.4C33.64 3.44 29.3 1.5 24 1.5 14.64 1.5 6.7 7.5 3.44 15.26l6.92 5.37C11.94 13.82 17.45 9.5 24 9.5z"/>
                        <path fill="#34A853" d="M46.5 24.5c0-1.64-.15-3.22-.43-4.75H24v9h12.7c-.55 3-2.22 5.54-4.7 7.25l7.2 5.6C43.78 37.76 46.5 31.68 46.5 24.5z"/>
                        <path fill="#FBBC05" d="M10.36 28.63c-.48-1.43-.75-2.95-.75-4.63s.27-3.2.75-4.63l-6.92-5.37C1.9 17 1.5 20.43 1.5 24s.4 7 1.94 10l6.92-5.37z"/>
                        <path fill="#EA4335" d="M24 46.5c5.7 0 10.48-1.88 13.97-5.1l-7.2-5.6c-1.98 1.35-4.53 2.2-6.77 2.2-6.55 0-12.06-4.32-13.64-10.37l-6.92 5.37C6.7 40.5 14.64 46.5 24 46.5z"/>
                        <path fill="none" d="M0 0h48v48H0z"/>
                    </svg>
                </span>
                <span>Entrar com Google</span>
            </a>

            <!-- Links de Rodapé -->
            <div class="form-footer">
                <p>
                    Não tem uma conta? 
                    <a href="{% url 'escolher_tipo_cadastro' %}">
                        Cadastre-se aqui
                    </a>
                </p>
                <p>
                    <a href="#">
                        Esqueceu sua senha?
                    </a>
                </p>
            </div>
        </form>
    </div>

    <script>
        // Canvas Background Animation
        const canvas = document.getElementById('canvas-bg');
        const ctx = canvas.getContext('2d');
        
        // Responsive Canvas
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Particle Animation
        const particles = [];
        const particleCount = 50;

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 3 + 1;
                this.speedX = Math.random() * 0.5 - 0.25;
                this.speedY = Math.random() * 0.5 - 0.25;
                this.opacity = Math.random() * 0.5 + 0.2;
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;

                if (this.x > canvas.width) this.x = 0;
                if (this.x < 0) this.x = canvas.width;
                if (this.y > canvas.height) this.y = 0;
                if (this.y < 0) this.y = canvas.height;
            }

            draw() {
                ctx.fillStyle = `rgba(218, 187, 44, ${this.opacity})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // Initialize particles
        for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle());
        }

        // Animation loop
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });

            requestAnimationFrame(animate);
        }

        animate();

        // Form Validation
        const form = document.querySelector('.auth-form');
        const emailInput = document.getElementById('email');
        const senhaInput = document.getElementById('senha');

        form.addEventListener('submit', function(e) {
            // Remove leading/trailing spaces
            emailInput.value = emailInput.value.trim();
        });
    </script>
</body>
</html>
